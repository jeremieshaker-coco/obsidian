syntax = "proto3";

package coco.deviceapi.v1;

option go_package = "github.com/cocorobotics/coco-services/deviceapi/v1;deviceapiv1";

import "google/api/field_behavior.proto";
import "google/api/resource.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

// =============================================================================
// DeviceService
//
// The Device API serves as the single source of truth for robot/device state,
// aggregating data from multiple internal services (State, Operations, Fleet)
// and external sources (DriveU, AWS Greengrass).
// =============================================================================
service DeviceService {
  // ---------------------------------------------------------------------------
  // Read Operations
  // ---------------------------------------------------------------------------

  // Returns a single device by resource name.
  // Consumers: Mission Control (device detail view), Integrations Service (ID resolution),
  //            Operations Service (delivery assignment), any service needing device state.
  rpc GetDevice(GetDeviceRequest) returns (GetDeviceResponse);

  // Returns a paginated list of devices matching the filter criteria.
  // Consumers: Mission Control (fleet overview), Dispatch Engine (available robots query),
  //            MDS Service (regulatory reporting), Operations dashboards.
  rpc ListDevices(ListDevicesRequest) returns (ListDevicesResponse);

  // Returns a single device by resource name.
  // Consumers: Mission Control (device creation form).
  rpc CreateDevice(CreateDeviceRequest) returns (CreateDeviceResponse);

  // Updates a device by resource name.
  // Consumers: Mission Control (device edit form).
  rpc UpdateDevice(UpdateDeviceRequest) returns (UpdateDeviceResponse);

  // Deletes a device by resource name.
  // Consumers: Mission Control (device deletion form).
  rpc DeleteDevice(DeleteDeviceRequest) returns (DeleteDeviceResponse);

  // Returns multiple devices by their resource names in a single request.
  // Consumers: Mission Control (bulk selection), Dispatch Engine (candidate robots),
  //            any service needing to fetch multiple known devices efficiently.
  rpc BatchGetDevices(BatchGetDevicesRequest) returns (BatchGetDevicesResponse);

  // Returns historical telemetry data for a device within a time range.
  // Consumers: Mission Control (historical playback, debugging), Analytics pipelines,
  //            Support tools (incident investigation).
  rpc GetTelemetry(GetTelemetryRequest) returns (GetTelemetryResponse);

  // ---------------------------------------------------------------------------
  // Unlock PIN Management
  // Used during the delivery flow to grant temporary access to the cargo compartment.
  // ---------------------------------------------------------------------------

  // Sets an unlock PIN for merchant/customer/operator access to the cargo lid.
  // Consumers: Operations Service (on delivery assignment), Deliveries Service (customer handoff),
  //            Mission Control (manual operator override).
  rpc SetUnlockPin(SetUnlockPinRequest) returns (SetUnlockPinResponse);

  // Clears the active unlock PIN, revoking access.
  // Consumers: Operations Service (after delivery completion), Deliveries Service (timeout/cancellation),
  //            Mission Control (manual revocation).
  rpc ClearUnlockPin(ClearUnlockPinRequest) returns (ClearUnlockPinResponse);

  // ---------------------------------------------------------------------------
  // Component Status Management
  // Used to set/clear backend-originated status flags on devices.
  // Note: Hardware-reported statuses come via MQTT, not this API.
  // ---------------------------------------------------------------------------

  // Sets one or more component status entries on a device.
  // Consumers: Operations Service (flagging maintenance needs), Monitoring systems (alerts).
  rpc SetComponentStatus(SetComponentStatusRequest) returns (SetComponentStatusResponse);

  // Clears component status entries from a device.
  // Consumers: Operations Service (after maintenance complete), Monitoring systems.
  rpc ClearComponentStatus(ClearComponentStatusRequest) returns (ClearComponentStatusResponse);

  // ---------------------------------------------------------------------------
  // Teleoperations Pipeline Management
  // Used by pilots to establish and manage DriveU teleoperation sessions.
  // ---------------------------------------------------------------------------

  // Initializes a teleoperation pipeline for a device.
  // Consumers: Mission Control (pilot interface), Teleops scheduling systems.
  rpc InitTeleopsPipeline(InitTeleopsPipelineRequest) returns (InitTeleopsPipelineResponse);

  // Gets the current state of a teleoperation pipeline.
  // Consumers: Mission Control (pilot interface), Teleops monitoring.
  rpc GetTeleopsPipeline(GetTeleopsPipelineRequest) returns (GetTeleopsPipelineResponse);

  // Releases a teleoperation pipeline, ending the session.
  // Consumers: Mission Control (pilot interface), Teleops scheduling systems.
  rpc ReleaseTeleopsPipeline(ReleaseTeleopsPipelineRequest) returns (ReleaseTeleopsPipelineResponse);

  // ---------------------------------------------------------------------------
  // Device Commands
  // Sends commands to the device that are executed asynchronously.
  // ---------------------------------------------------------------------------

  // Sends a command to the device (unlock lid, honk, flash lights, emergency stop, etc.).
  // The command is dispatched via MQTT and this method returns once acknowledged.
  // Consumers: Mission Control (operator actions), Deliveries Service (automated unlock),
  //            Operations Service (emergency interventions).
  rpc SendDeviceCommand(SendDeviceCommandRequest) returns (SendDeviceCommandResponse);

  // ---------------------------------------------------------------------------
  // Real-time Streaming
  // ---------------------------------------------------------------------------

  // Streams real-time device updates as they occur.
  // Consumers: Mission Control (live fleet map), Monitoring dashboards,
  //            any service needing push-based state updates instead of polling.
  rpc StreamDeviceUpdates(StreamDeviceUpdatesRequest) returns (stream DeviceUpdate);
}

// =============================================================================
// Events Published by Device API (via RabbitMQ)
//
// The Device API acts as a consolidation layer, consuming raw data from multiple
// sources (MQTT heartbeats, DriveU webhooks, Greengrass, etc.) and emitting
// enriched, unified events for downstream services. This abstracts away the
// complexity of the underlying data sources.
//
// Previously, services like Operations, Dispatch Engine, Fleet, and Integrations
// each consumed raw IoT.Heartbeat events and had to independently enrich them.
// With the Device API, they subscribe to these consolidated events instead.
// =============================================================================
//
// 1. Device.Heartbeat
//    - Trigger: Raw MQTT heartbeat received from robot
//    - Payload: Full Device message with all fields populated (location, battery,
//               connectivity, DriveU status, component health, operational flags)
//    - Frequency: Every heartbeat (~few seconds per device)
//    - Consumers: Dispatch Engine (supply updates), Fleet Service (cache refresh),
//                 Operations Service (state tracking), Trip Monitor
//
// 2. Device.StateChange
//    - Trigger: operation_state field changes (e.g., PARKED â†’ ON_TRIP)
//    - Payload: Device message + previous_state for diffing
//    - Consumers: Operations Service (state history), Integrations Service (partner updates),
//                 MDS Service (regulatory reporting)
//
// 3. Device.HealthChange
//    - Trigger: healthy flag changes OR component health degrades/recovers
//    - Payload: Device message with updated component_health
//    - Consumers: Operations Service (maintenance flagging), Monitoring/Alerting systems
//
// 4. Device.ConnectivityChange
//    - Trigger: Device goes online/offline OR DriveU status changes
//    - Payload: Device message with updated connectivity and driveu_status
//    - Consumers: Mission Control (live status), Teleops scheduling
//
// 5. Device.LidEvent
//    - Trigger: Lid opened or closed (from robot MQTT events)
//    - Payload: Device message with updated lid_state and current LidCycle
//    - Consumers: Deliveries Service (loading/unloading flow), Operations Service
// =============================================================================

message GetDeviceRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.FieldMask read_mask = 2;
}

message GetDeviceResponse {
  Device device = 1;
}

message ListDevicesRequest {
  string parent = 1 [(google.api.field_behavior) = REQUIRED];
  int32 page_size = 2;
  string page_token = 3;
  string filter = 4;
  google.protobuf.FieldMask read_mask = 5;
}

message BatchGetDevicesRequest {
  string parent = 1 [(google.api.field_behavior) = REQUIRED];
  repeated string names = 2 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.FieldMask read_mask = 3;
}

message BatchGetDevicesResponse {
  repeated Device devices = 1;
}

message CreateDeviceRequest {
    string name = 1 [(google.api.field_behavior) = REQUIRED];
    string provider_id = 2;
    Deployment initial_deployment = 3;
    repeated ProviderMapping provider_mappings = 4;
}

message CreateDeviceResponse {
    Device device = 1;
}

message UpdateDeviceRequest {
    Device device = 1 [(google.api.field_behavior) = REQUIRED];
    google.protobuf.FieldMask update_mask = 2;
}

message UpdateDeviceResponse {
    Device device = 1;
}

message DeleteDeviceRequest {
    string name = 1 [(google.api.field_behavior) = REQUIRED];
}
  
message DeleteDeviceResponse {}

message ListDevicesResponse {
  repeated Device devices = 1;
  string next_page_token = 2;
  int32 total_size = 3;
}

message GetTelemetryRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.Timestamp start_time = 2;
  google.protobuf.Timestamp end_time = 3;
  int32 page_size = 4;
  string page_token = 5;
}

message GetTelemetryResponse {
  repeated TelemetryPoint telemetry = 1;
  string next_page_token = 2;
}

message TelemetryPoint {
  google.protobuf.Timestamp record_time = 1;
  Location location = 2;
  Battery battery = 3;
  Connectivity connectivity = 4;
  bool healthy = 5;
  OperationState operation_state = 6;
}

message SetUnlockPinRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  string pin = 2 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.Timestamp expire_time = 3;
  string delivery_id = 4;
  UnlockPinType pin_type = 5;
}

message ClearUnlockPinRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
}

message SetUnlockPinResponse {
  UnlockPinInfo unlock_pin = 1;
}

message ClearUnlockPinResponse {}

message SetComponentStatusRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  repeated ComponentStatusEntry statuses = 2 [(google.api.field_behavior) = REQUIRED];
}

message ClearComponentStatusRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  repeated string status_ids = 2;
  bool clear_all = 3;
}

message SetComponentStatusResponse {
  repeated ComponentStatusEntry active_statuses = 1;
}

message ClearComponentStatusResponse {
  repeated ComponentStatusEntry active_statuses = 1;
}

message ComponentStatusEntry {
  string id = 1;
  HardwareComponent component = 2;
  HardwareStatusCode status = 3;
  string message = 4;
  google.protobuf.Timestamp create_time = 5;
  google.protobuf.Timestamp expire_time = 6;
  map<string, string> error_details = 7;
}

message InitTeleopsPipelineRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  string operator_id = 2 [(google.api.field_behavior) = REQUIRED];
  TeleopsPipelineType pipeline_type = 3;
  google.protobuf.Int32Value priority = 4;
  string reason = 5;
}

message InitTeleopsPipelineResponse {
  TeleopsPipeline pipeline = 1;
}

message GetTeleopsPipelineRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
}

message GetTeleopsPipelineResponse {
  TeleopsPipeline pipeline = 1;
}

message ReleaseTeleopsPipelineRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  string operator_id = 2 [(google.api.field_behavior) = REQUIRED];
  string release_reason = 3;
}

message ReleaseTeleopsPipelineResponse {
  TeleopsPipeline pipeline = 1;
}

message TeleopsPipeline {
  string name = 1;
  TeleopsPipelineState state = 2;
  string operator_id = 3;
  TeleopsPipelineType pipeline_type = 4;
  google.protobuf.Timestamp init_time = 5;
  google.protobuf.Timestamp expire_time = 6;
  DriveUStatus driveu_status = 7;
  string stream_url = 8;
  TeleopsConnectionInfo connection_info = 9;
  string error_message = 10;
}

message TeleopsConnectionInfo {
  string node_id = 1;
  string relay_id = 2;
  int32 latency_ms = 3;
  int32 bandwidth_kbps = 4;
  string video_codec = 5;
  string audio_codec = 6;
}

message SendDeviceCommandRequest {
  string name = 1 [(google.api.field_behavior) = REQUIRED];
  DeviceCommandType command_type = 2 [(google.api.field_behavior) = REQUIRED];
  map<string, string> parameters = 3;
  string request_id = 4;
  google.protobuf.Int32Value timeout_seconds = 5;
}

message SendDeviceCommandResponse {
  string name = 1;
  string command_id = 2;
  DeviceCommandStatus status = 3;
  map<string, string> result = 4;
  string error_message = 5;
  google.protobuf.Timestamp execute_time = 6;
}

message StreamDeviceUpdatesRequest {
  repeated string names = 1;
  google.protobuf.Timestamp since = 2;
  repeated UpdateType update_types = 3;
}

message DeviceUpdate {
  Device device = 1;
  google.protobuf.Timestamp update_time = 2;
  UpdateType update_type = 3;
  DeviceState previous_state = 4;
}

message Device {
  option (google.api.resource) = {
    type: "deviceapi.coco.com/Device"
    pattern: "devices/{device}"
  };

  // ===========================================================================
  // Identity
  // ===========================================================================

  // Resource name in format "devices/{device_id}" where device_id is the robot serial number.
  string name = 1 [(google.api.field_behavior) = IDENTIFIER];

  // Legacy provider identifier, used for backward compatibility with older systems.
  string provider_id = 2;

  // ===========================================================================
  // Real-time Telemetry
  // Data reported directly from the robot via MQTT heartbeats.
  // ===========================================================================

  // Current GPS position, heading, speed, and accuracy.
  Location location = 10 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Battery state including charge level, voltage, temperature, and charging status.
  Battery battery = 11 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Network connectivity status and signal strength.
  Connectivity connectivity = 14 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // Health & Status
  // Aggregated health indicators and component-level diagnostics.
  // ===========================================================================

  // Overall health flag. False if any critical component has a fault.
  bool healthy = 12 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Current operational state (on_trip, parked, grounded, off_duty, deployed).
  OperationState operation_state = 13 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Detailed health status for each hardware component (cameras, battery, etc.).
  ComponentHealth component_health = 16 [(google.api.field_behavior) = OUTPUT_ONLY];

  // DriveU teleoperation system status (streamer online, pilot connected, etc.).
  DriveUStatus driveu_status = 15 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Current state of the cargo lid (open/closed) and active lid cycle.
  LidState lid_state = 17 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // Operational Flags
  // Business logic flags computed by backend services (Operations, Dispatch Engine).
  // ===========================================================================

  // True if the robot needs to be moved (e.g., repositioned by ops team).
  bool needs_movement = 20 [(google.api.field_behavior) = OUTPUT_ONLY];

  // True if there is food currently in the cargo compartment.
  bool has_food = 21 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Type of trip the robot is currently on (delivery, return, deployment, pickup, none).
  TripType trip_type = 22 [(google.api.field_behavior) = OUTPUT_ONLY];

  // True if the robot has been flagged for maintenance.
  bool needs_maintenance = 23 [(google.api.field_behavior) = OUTPUT_ONLY];

  // True if the robot needs to be physically picked up (e.g., stuck or broken down).
  bool needs_pickup = 24 [(google.api.field_behavior) = OUTPUT_ONLY];

  // True if the robot is capable of being driven (healthy, charged, no critical faults).
  bool driveable = 25 [(google.api.field_behavior) = OUTPUT_ONLY];

  // True if the robot is currently undergoing maintenance.
  bool undergoing_maintenance = 26 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Current active demand (delivery order) assigned to this robot, if any.
  ActiveDemand active_demand = 27 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // Deployment & Provider Integrations
  // Where the robot is deployed and how it maps to external partner systems.
  // ===========================================================================

  // The location (parking lot, MRO, POD) where this robot is currently deployed.
  Deployment deployed_location = 30 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Mappings to external delivery partner vehicle IDs (e.g., Uber, DoorDash).
  // Each partner assigns their own ID to our robots for their integration.
  repeated ProviderMapping provider_mappings = 31 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // Active Transient States
  // Short-lived states that are actively set and cleared during operations.
  // ===========================================================================

  // Currently active component status entries (faults, warnings) set via SetComponentStatus.
  repeated ComponentStatusEntry active_component_statuses = 35 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Currently active unlock PIN for merchant/customer/operator access, if set.
  UnlockPinInfo active_unlock_pin = 36 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // MDS (Mobility Data Specification)
  // Data formatted for city regulatory compliance and reporting.
  // ===========================================================================

  // Current MDS vehicle state (available, reserved, non_operational, etc.).
  string mds_vehicle_state = 40 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Last MDS event reported to city systems.
  MdsEvent last_mds_event = 41 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Last MDS telemetry snapshot reported to city systems.
  MdsTelemetry last_mds_telemetry = 42 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // Infrastructure
  // AWS IoT and edge computing status.
  // ===========================================================================

  // AWS Greengrass core device status and installed component versions.
  GreengrassStatus greengrass_status = 50 [(google.api.field_behavior) = OUTPUT_ONLY];

  // ===========================================================================
  // Timestamps
  // ===========================================================================

  // When this device record was first created.
  google.protobuf.Timestamp create_time = 60 [(google.api.field_behavior) = OUTPUT_ONLY];

  // When any field on this device was last updated.
  google.protobuf.Timestamp update_time = 61 [(google.api.field_behavior) = OUTPUT_ONLY];

  // When we last received a heartbeat or telemetry from this device.
  google.protobuf.Timestamp last_sync_time = 62 [(google.api.field_behavior) = OUTPUT_ONLY];
}

message DeviceState {
  string name = 1;
  OperationState operation_state = 2;
  Connectivity connectivity = 3;
  bool healthy = 4;
  int32 battery_charge_percent = 5;
  double latitude = 6;
  double longitude = 7;
  google.protobuf.Timestamp last_sync_time = 8;
  google.protobuf.Timestamp update_time = 9;
}

message Location {
  double latitude = 1;
  double longitude = 2;
  double heading = 3;
  double horizontal_accuracy = 4;
  double altitude = 5;
  double speed = 6;
  google.protobuf.Timestamp record_time = 7;
}

message Battery {
  int32 charge_percent = 1;
  bool is_charging = 2;
  string serial_number = 3;
  double voltage = 4;
  double current = 5;
  double temperature = 6;
  int32 estimated_range_meters = 7;
  google.protobuf.Timestamp record_time = 8;
}

message Connectivity {
  bool online = 1;
  google.protobuf.Timestamp last_seen_time = 2;
  NetworkType network_type = 3;
  int32 signal_strength = 4;
}

message DriveUStatus {
  DriveUStreamerStatus streamer_status = 1;
  DriveUStreamerStatus previous_status = 2;
  DriveUNodeStatus node_status = 3;
  bool pilot_connected = 4;
  google.protobuf.Timestamp update_time = 5;
  string driveu_uuid = 6;
}

message ComponentHealth {
  bool all_healthy = 1;
  repeated ComponentStatus components = 2;
  repeated string unhealthy_component_names = 3;
  google.protobuf.Timestamp check_time = 4;
}

message ComponentStatus {
  HardwareComponent component = 1;
  HardwareStatusCode status = 2;
  string message = 3;
  google.protobuf.Timestamp last_check_time = 4;
  map<string, string> error_details = 5;
}

message LidState {
  bool is_open = 1;
  LidCycle current_cycle = 2;
  google.protobuf.Timestamp change_time = 3;
}

message LidCycle {
  string cycle_id = 1;
  google.protobuf.Timestamp start_time = 2;
  google.protobuf.Timestamp end_time = 3;
}

message ActiveDemand {
  string demand_id = 1;
  DemandType demand_type = 2;
  DemandStatus status = 3;
  Location destination = 4;
  google.protobuf.Timestamp eta = 5;
  string merchant_id = 6;
  string provider_order_id = 7;
}

message Deployment {
  string id = 1;
  LocationType type = 2;
  string name = 3;
  Location location = 4;
}

message ProviderMapping {
  string provider = 1;
  string provider_vehicle_id = 2;
  google.protobuf.Timestamp create_time = 3;
}

message UnlockPinInfo {
  string pin = 1;
  UnlockPinType pin_type = 2;
  google.protobuf.Timestamp expire_time = 3;
  string delivery_id = 4;
}

message MdsEvent {
  string event_id = 1;
  string vehicle_state = 2;
  string event_type = 3;
  int64 timestamp = 4;
  Location location = 5;
}

message MdsTelemetry {
  string telemetry_id = 1;
  int64 timestamp = 2;
  Location location = 3;
  int32 battery_percent = 4;
}

message GreengrassStatus {
  GreengrassCoreStatus status = 1;
  google.protobuf.Timestamp last_status_update_time = 2;
  repeated InstalledComponent installed_components = 3;
}

message InstalledComponent {
  string component_name = 1;
  string component_version = 2;
  ComponentLifecycleState lifecycle_state = 3;
}

message GeographicBounds {
  double min_latitude = 1;
  double max_latitude = 2;
  double min_longitude = 3;
  double max_longitude = 4;
}

enum OperationState {
  OPERATION_STATE_UNSPECIFIED = 0;
  OPERATION_STATE_ON_TRIP = 1;
  OPERATION_STATE_PARKED = 2;
  OPERATION_STATE_GROUNDED = 3;
  OPERATION_STATE_OFF_DUTY = 4;
  OPERATION_STATE_DEPLOYED = 5;
}

enum TripType {
  TRIP_TYPE_UNSPECIFIED = 0;
  TRIP_TYPE_DELIVERY = 1;
  TRIP_TYPE_RETURN = 2;
  TRIP_TYPE_DEPLOYMENT = 3;
  TRIP_TYPE_PICKUP = 4;
  TRIP_TYPE_NONE = 5;
}

enum LocationType {
  LOCATION_TYPE_UNSPECIFIED = 0;
  LOCATION_TYPE_PARKING_LOT = 1;
  LOCATION_TYPE_MRO = 2;
  LOCATION_TYPE_POD = 3;
}

enum NetworkType {
  NETWORK_TYPE_UNSPECIFIED = 0;
  NETWORK_TYPE_WIFI = 1;
  NETWORK_TYPE_CELLULAR = 2;
  NETWORK_TYPE_ETHERNET = 3;
}

enum DriveUStreamerStatus {
  DRIVEU_STREAMER_STATUS_UNSPECIFIED = 0;
  DRIVEU_STREAMER_STATUS_OFFLINE = 1;
  DRIVEU_STREAMER_STATUS_ONLINE = 2;
  DRIVEU_STREAMER_STATUS_CONNECTED_TO_NODE = 3;
  DRIVEU_STREAMER_STATUS_STANDBY = 4;
  DRIVEU_STREAMER_STATUS_STREAMING = 5;
}

enum DriveUNodeStatus {
  DRIVEU_NODE_STATUS_UNSPECIFIED = 0;
  DRIVEU_NODE_STATUS_OFFLINE = 1;
  DRIVEU_NODE_STATUS_ONLINE = 2;
  DRIVEU_NODE_STATUS_CONNECTED_TO_RELAY = 3;
}

enum HardwareStatusCode {
  HARDWARE_STATUS_CODE_UNSPECIFIED = 0;
  HARDWARE_STATUS_CODE_OK = 1;
  HARDWARE_STATUS_CODE_READY = 2;
  HARDWARE_STATUS_CODE_NOT_INITIALIZED = 3;
  HARDWARE_STATUS_CODE_TIMEOUT = 4;
  HARDWARE_STATUS_CODE_NON_CRITICAL_FAULT = 5;
  HARDWARE_STATUS_CODE_CRITICAL_FAULT = 6;
}

enum HardwareComponent {
  HARDWARE_COMPONENT_UNSPECIFIED = 0;
  HARDWARE_COMPONENT_SEGWAY_BASE = 1;
  HARDWARE_COMPONENT_CAMERAS = 2;
  HARDWARE_COMPONENT_LTE_ROUTERS = 3;
  HARDWARE_COMPONENT_DISK = 4;
  HARDWARE_COMPONENT_AUDIO_DEVICES = 5;
  HARDWARE_COMPONENT_BATTERY = 6;
  HARDWARE_COMPONENT_EMERGENCY_BUTTON = 7;
  HARDWARE_COMPONENT_USB = 8;
  HARDWARE_COMPONENT_DOCKER = 9;
  HARDWARE_COMPONENT_KEYPAD = 10;
  HARDWARE_COMPONENT_NODES = 11;
  HARDWARE_COMPONENT_ETH0 = 12;
  HARDWARE_COMPONENT_NX_POWER = 13;
  HARDWARE_COMPONENT_CARGO_POWER = 14;
  HARDWARE_COMPONENT_HW_ID = 15;
}

enum DemandType {
  DEMAND_TYPE_UNSPECIFIED = 0;
  DEMAND_TYPE_PENDING = 1;
  DEMAND_TYPE_SCHEDULED = 2;
  DEMAND_TYPE_ACTIVE = 3;
}

enum DemandStatus {
  DEMAND_STATUS_UNSPECIFIED = 0;
  DEMAND_STATUS_PENDING = 1;
  DEMAND_STATUS_ASSIGNED = 2;
  DEMAND_STATUS_EN_ROUTE_TO_PICKUP = 3;
  DEMAND_STATUS_AT_PICKUP = 4;
  DEMAND_STATUS_LOADING = 5;
  DEMAND_STATUS_EN_ROUTE_TO_DROPOFF = 6;
  DEMAND_STATUS_AT_DROPOFF = 7;
  DEMAND_STATUS_UNLOADING = 8;
  DEMAND_STATUS_COMPLETED = 9;
  DEMAND_STATUS_CANCELLED = 10;
}

enum GreengrassCoreStatus {
  GREENGRASS_CORE_STATUS_UNSPECIFIED = 0;
  GREENGRASS_CORE_STATUS_HEALTHY = 1;
  GREENGRASS_CORE_STATUS_UNHEALTHY = 2;
}

enum ComponentLifecycleState {
  COMPONENT_LIFECYCLE_STATE_UNSPECIFIED = 0;
  COMPONENT_LIFECYCLE_STATE_RUNNING = 1;
  COMPONENT_LIFECYCLE_STATE_ERRORED = 2;
  COMPONENT_LIFECYCLE_STATE_BROKEN = 3;
  COMPONENT_LIFECYCLE_STATE_INSTALLED = 4;
  COMPONENT_LIFECYCLE_STATE_STARTING = 5;
  COMPONENT_LIFECYCLE_STATE_STOPPING = 6;
  COMPONENT_LIFECYCLE_STATE_FINISHED = 7;
}

enum UpdateType {
  UPDATE_TYPE_UNSPECIFIED = 0;
  UPDATE_TYPE_HEARTBEAT = 1;
  UPDATE_TYPE_STATE_CHANGE = 2;
  UPDATE_TYPE_CONNECTIVITY_CHANGE = 3;
  UPDATE_TYPE_HEALTH_CHANGE = 4;
  UPDATE_TYPE_LID_EVENT = 5;
  UPDATE_TYPE_TRIP_UPDATE = 6;
  UPDATE_TYPE_DRIVEU_STATUS_CHANGE = 7;
}

enum UnlockPinType {
  UNLOCK_PIN_TYPE_UNSPECIFIED = 0;
  UNLOCK_PIN_TYPE_MERCHANT = 1;
  UNLOCK_PIN_TYPE_CUSTOMER = 2;
  UNLOCK_PIN_TYPE_OPERATOR = 3;
}

enum TeleopsPipelineState {
  TELEOPS_PIPELINE_STATE_UNSPECIFIED = 0;
  TELEOPS_PIPELINE_STATE_INITIALIZING = 1;
  TELEOPS_PIPELINE_STATE_READY = 2;
  TELEOPS_PIPELINE_STATE_CONNECTED = 3;
  TELEOPS_PIPELINE_STATE_STREAMING = 4;
  TELEOPS_PIPELINE_STATE_ERROR = 5;
  TELEOPS_PIPELINE_STATE_RELEASED = 6;
}

enum TeleopsPipelineType {
  TELEOPS_PIPELINE_TYPE_UNSPECIFIED = 0;
  TELEOPS_PIPELINE_TYPE_MONITORING = 1;
  TELEOPS_PIPELINE_TYPE_CONTROL = 2;
  TELEOPS_PIPELINE_TYPE_EMERGENCY = 3;
}

enum DeviceCommandType {
  DEVICE_COMMAND_TYPE_UNSPECIFIED = 0;
  DEVICE_COMMAND_TYPE_UNLOCK_LID = 1;
  DEVICE_COMMAND_TYPE_LOCK_LID = 2;
  DEVICE_COMMAND_TYPE_HONK = 3;
  DEVICE_COMMAND_TYPE_FLASH_LIGHTS = 4;
  DEVICE_COMMAND_TYPE_EMERGENCY_STOP = 5;
  DEVICE_COMMAND_TYPE_RESUME = 6;
  DEVICE_COMMAND_TYPE_REBOOT = 7;
  DEVICE_COMMAND_TYPE_UPDATE_SOFTWARE = 8;
}

enum DeviceCommandStatus {
  DEVICE_COMMAND_STATUS_UNSPECIFIED = 0;
  DEVICE_COMMAND_STATUS_PENDING = 1;
  DEVICE_COMMAND_STATUS_SENT = 2;
  DEVICE_COMMAND_STATUS_ACKNOWLEDGED = 3;
  DEVICE_COMMAND_STATUS_EXECUTED = 4;
  DEVICE_COMMAND_STATUS_FAILED = 5;
  DEVICE_COMMAND_STATUS_TIMEOUT = 6;
}
